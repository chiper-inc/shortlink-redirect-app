"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.DropdownBox = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const Icon_1 = require("../../../Theme/Icon");
const Colors_1 = __importDefault(require("../../../Theme/Colors"));
const Typography_1 = require("../../../Theme/Typography");
exports.DropdownBox = (0, react_1.memo)(({ icon, placeholder, disabled, value, helperText, isValid = true, full, dropdown, "data-testid": testID = "chiper-dropdown-box", isOpened, setIsOpened, hasPlaceholderFixed, isReadOnly, }) => {
    const ref = (0, react_1.useRef)(null);
    const primaryIconColor = Colors_1.default.primary[!isValid ? "chiperBrandRed" : "yankeesBlue"];
    const iconColor = disabled ? Colors_1.default.greyscale.gray200 : primaryIconColor;
    (0, react_1.useEffect)(() => {
        const handleOutsideClick = (event) => {
            if (ref.current && !ref.current.contains(event.target)) {
                setIsOpened(false);
            }
        };
        document.addEventListener("mousedown", handleOutsideClick);
        return () => {
            document.removeEventListener("mousedown", handleOutsideClick);
        };
    }, [setIsOpened]);
    const handleOpen = () => {
        if (!disabled && !isReadOnly)
            setIsOpened((prev) => !prev);
    };
    return ((0, jsx_runtime_1.jsxs)("div", Object.assign({ ref: ref, "data-testid": testID, className: `
        ${full ? "sbw-w-full" : "sbw-w-[312px]"}
        sbw-relative
        sbw-flex
        sbw-h-fit
        sbw-flex-col
      ` }, { children: [(0, jsx_runtime_1.jsxs)("button", Object.assign({ type: "button", className: `
          sbw-relative
          sbw-box-border
          sbw-flex
          sbw-h-[50px]
          sbw-w-full
          sbw-items-center
          sbw-rounded
          sbw-border
          sbw-px-4
          sbw-transition-all
          ${(!isValid && !disabled) ? "sbw-border-primary-chiperBrandRed" : "sbw-border-greyscale-gray60"}
          ${disabled ? "sbw-bg-greyscale-gray25" : "sbw-bg-transparent"}
          ${isOpened ? "sbw-border-primary-yankeesBlue" : ""}
        `, onClick: handleOpen }, { children: [icon && ((0, jsx_runtime_1.jsx)(Icon_1.Icon, { name: icon, color: iconColor, size: 16, className: "sbw-mr-[8px]" })), (0, jsx_runtime_1.jsxs)("div", Object.assign({ className: "\n            sbw-flex\n            sbw-h-full\n            sbw-flex-1\n            sbw-flex-col\n            sbw-justify-center\n            sbw-py-[8px]\n          " }, { children: [(0, jsx_runtime_1.jsx)("div", Object.assign({ className: `
              ${((isOpened || !!value) && !hasPlaceholderFixed)
                                    ? "sbw-top-[8px] sbw-text-[10px]"
                                    : "sbw-top-[16px] sbw-text-base"}
              ${disabled ? "sbw-text-greyscale-gray200" : "sbw-text-primary-darkBlueGray"}
              sbw-absolute
              sbw-text-left
              sbw-font-normal
              sbw-leading-none
              sbw-transition-all
              sbw-ease-in-out
              sbw-line-clamp-1
              ` }, { children: placeholder })), !!value && ((0, jsx_runtime_1.jsx)("div", Object.assign({ className: `
                sbw-flex
                sbw-w-full
                sbw-break-all
                sbw-text-left
                sbw-line-clamp-1
                ${placeholder ? "sbw-pt-2.5" : ""}
              ` }, { children: (0, jsx_runtime_1.jsx)(Typography_1.Typography, Object.assign({ variant: "body", color: disabled ? "gray200" : "yankeesBlue", "data-testid": "dropdown-box-value" }, { children: value })) })))] })), !isReadOnly && ((0, jsx_runtime_1.jsx)(Icon_1.Icon, { name: isOpened ? "CaretUp" : "CaretDown", color: iconColor, size: 16, className: "sbw-ml-[8px]" }))] })), isOpened && ((0, jsx_runtime_1.jsx)("div", Object.assign({ className: `
          sbw-absolute
          sbw-left-0
          sbw-z-50
          sbw-w-full
          sbw-bg-primary-white
          ${helperText ? "sbw-top-[calc(100%-20px)]" : "sbw-top-full"}
        ` }, { children: dropdown }))), helperText && ((0, jsx_runtime_1.jsx)("p", Object.assign({ className: `
            ${(!isValid && !disabled) ? "sbw-text-primary-chiperBrandRed" : "sbw-text-greyscale-gray200"}
            sbw-mt-1
            sbw-pl-4
            sbw-text-xs
            sbw-line-clamp-1
          ` }, { children: helperText })))] })));
});
